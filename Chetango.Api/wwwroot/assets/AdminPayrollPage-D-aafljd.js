import{F as S,J as A,h as F,r as g,j as e,X as D,Q as z,C as k,m as B,U as O,ab as H}from"./index-xg0wAXn9.js";import{u as E}from"./useMutation-C0w7SSmQ.js";import{p as T,f as R,T as J,a as K,d as V,e as I,h as W,i as X,C as Y}from"./payrollQueries-B0uB6XeT.js";import{a as M,C as Q,u as Z,F as _,T as ee}from"./useModalScroll-bImGwwMj.js";import{T as se,C as ae}from"./triangle-alert-BedL4Rwo.js";function te(){const t=S();return E({mutationFn:async r=>(await F.post("/api/nomina/aprobar-pago",r)).data,onSuccess:()=>{t.invalidateQueries({queryKey:T.all}),A.success("Pago aprobado exitosamente")},onError:r=>{const l=r.response?.data?.error||"Error al aprobar el pago";A.error(l)}})}function re(){const t=S();return E({mutationFn:async r=>(await F.post("/api/nomina/liquidar-mes",r)).data,onSuccess:()=>{t.invalidateQueries({queryKey:T.all}),A.success("LiquidaciÃ³n mensual generada exitosamente")},onError:r=>{const l=r.response?.data?.error||"Error al generar la liquidaciÃ³n";A.error(l)}})}function le(){const t=S();return E({mutationFn:async r=>(await F.post("/api/nomina/registrar-pago",r)).data,onSuccess:()=>{t.invalidateQueries({queryKey:T.all}),A.success("Pago registrado exitosamente")},onError:r=>{const l=r.response?.data?.error||"Error al registrar el pago";A.error(l)}})}function oe(){const t=S();return E({mutationFn:async r=>(await F.delete(`/api/nomina/liquidacion/${r}`)).data,onSuccess:()=>{t.invalidateQueries({queryKey:T.all}),A.success("LiquidaciÃ³n eliminada exitosamente")},onError:r=>{const l=r.response?.data?.error||"Error al eliminar la liquidaciÃ³n";A.error(l)}})}const ne=({isOpen:t,onClose:r,profesor:l,claseNombre:N,claseFecha:o,onAprobar:b,isLoading:m=!1})=>{const[d,f]=g.useState("ninguno"),[u,x]=g.useState(""),[h,c]=g.useState("");if(!t||!l)return null;const v=()=>{const p=l.totalPago;if(d==="ninguno"||!u)return p;const j=parseFloat(u)||0,n=d==="bono"?j:-j;return p+n},a=p=>{if(p.preventDefault(),d==="ninguno")b();else{const j=parseFloat(u)||0,n=d==="bono"?j:-j;b(n,h||void 0)}},y=()=>{m||(f("ninguno"),x(""),c(""),r())};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-[#1a1a1a] border border-[rgba(255,255,255,0.1)] rounded-2xl shadow-2xl w-full max-w-lg mx-4 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[rgba(255,255,255,0.1)]",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-[#f9fafb] text-xl font-bold",children:"Aprobar Pago"}),e.jsx("p",{className:"text-[#9ca3af] text-sm mt-1",children:"Valida el pago o agrega ajustes"})]}),e.jsx("button",{onClick:y,disabled:m,className:"text-[#9ca3af] hover:text-[#f9fafb] transition-colors disabled:opacity-50",children:e.jsx(D,{size:24})})]}),e.jsxs("form",{onSubmit:a,children:[e.jsx("div",{className:"p-6 bg-[rgba(26,26,26,0.5)] border-b border-[rgba(255,255,255,0.05)]",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[#9ca3af] text-xs",children:"Clase"}),e.jsx("p",{className:"text-[#f9fafb] font-medium",children:N})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[#9ca3af] text-xs",children:"Profesor"}),e.jsx("p",{className:"text-[#f9fafb] text-sm",children:l.nombreProfesor}),e.jsx("p",{className:"text-[#6b7280] text-xs",children:l.rolEnClase})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[#9ca3af] text-xs",children:"Fecha"}),e.jsx("p",{className:"text-[#f9fafb] text-sm",children:o})]})]})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-[rgba(64,64,64,0.2)] border border-[rgba(255,255,255,0.1)] rounded-lg",children:[e.jsx("span",{className:"text-[#9ca3af]",children:"Tarifa Programada"}),e.jsx("span",{className:"text-[#f9fafb] font-semibold",children:R(l.totalPago)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[#f9fafb] text-sm font-medium block mb-2",children:"Â¿Deseas agregar un ajuste?"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>f("ninguno"),className:`p-3 rounded-lg border transition-all ${d==="ninguno"?"bg-[rgba(96,165,250,0.15)] border-[#60a5fa] text-[#60a5fa]":"bg-[rgba(64,64,64,0.2)] border-[rgba(255,255,255,0.1)] text-[#9ca3af] hover:border-[rgba(255,255,255,0.2)]"}`,children:[e.jsx(z,{size:20,className:"mx-auto mb-1"}),e.jsx("span",{className:"text-xs font-medium",children:"Sin Ajuste"})]}),e.jsxs("button",{type:"button",onClick:()=>f("bono"),className:`p-3 rounded-lg border transition-all ${d==="bono"?"bg-[rgba(34,197,94,0.15)] border-[#4ade80] text-[#4ade80]":"bg-[rgba(64,64,64,0.2)] border-[rgba(255,255,255,0.1)] text-[#9ca3af] hover:border-[rgba(255,255,255,0.2)]"}`,children:[e.jsx(J,{size:20,className:"mx-auto mb-1"}),e.jsx("span",{className:"text-xs font-medium",children:"Bono"})]}),e.jsxs("button",{type:"button",onClick:()=>f("descuento"),className:`p-3 rounded-lg border transition-all ${d==="descuento"?"bg-[rgba(239,68,68,0.15)] border-[#f87171] text-[#f87171]":"bg-[rgba(64,64,64,0.2)] border-[rgba(255,255,255,0.1)] text-[#9ca3af] hover:border-[rgba(255,255,255,0.2)]"}`,children:[e.jsx(K,{size:20,className:"mx-auto mb-1"}),e.jsx("span",{className:"text-xs font-medium",children:"Descuento"})]})]})]}),d!=="ninguno"&&e.jsxs("div",{className:"space-y-3 animate-in fade-in duration-200",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"valorAjuste",className:"text-[#f9fafb] text-sm font-medium block mb-2",children:["Valor del ",d==="bono"?"Bono":"Descuento"]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#9ca3af]",children:"$"}),e.jsx("input",{type:"number",id:"valorAjuste",value:u,onChange:p=>x(p.target.value),placeholder:"0",min:"0",step:"1000",required:!0,className:"w-full pl-8 pr-4 py-3 bg-[rgba(26,26,26,0.5)] border border-[rgba(255,255,255,0.1)] rounded-lg text-[#f9fafb] placeholder:text-[#6b7280] focus:border-[#60a5fa] focus:outline-none transition-colors"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"concepto",className:"text-[#f9fafb] text-sm font-medium block mb-2",children:["Motivo del ",d==="bono"?"Bono":"Descuento"]}),e.jsx("textarea",{id:"concepto",value:h,onChange:p=>c(p.target.value),placeholder:d==="bono"?"Ej: Clase excepcional con 25 alumnos":"Ej: LlegÃ³ 15 minutos tarde",rows:2,required:!0,className:"w-full px-4 py-3 bg-[rgba(26,26,26,0.5)] border border-[rgba(255,255,255,0.1)] rounded-lg text-[#f9fafb] placeholder:text-[#6b7280] focus:border-[#60a5fa] focus:outline-none transition-colors resize-none"})]})]}),e.jsxs("div",{className:"flex justify-between items-center p-4 bg-[rgba(96,165,250,0.1)] border border-[rgba(96,165,250,0.3)] rounded-lg",children:[e.jsx("span",{className:"text-[#f9fafb] font-semibold",children:"Total a Pagar"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[#60a5fa] text-xl font-bold",children:R(v())}),d!=="ninguno"&&u&&e.jsxs("p",{className:"text-[#9ca3af] text-xs mt-1",children:[d==="bono"?"+":"-"," ",R(parseFloat(u)||0)]})]})]})]}),e.jsxs("div",{className:"flex gap-3 p-6 bg-[rgba(26,26,26,0.5)] border-t border-[rgba(255,255,255,0.05)]",children:[e.jsx("button",{type:"button",onClick:y,disabled:m,className:"flex-1 px-6 py-3 bg-[rgba(64,64,64,0.3)] hover:bg-[rgba(64,64,64,0.5)] text-[#f9fafb] rounded-lg font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:m,className:"flex-1 px-6 py-3 bg-[#4ade80] hover:bg-[#22c55e] text-[#0a0a0a] rounded-lg font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Aprobando...":"Aprobar Pago"})]})]})]})})},P=t=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(t),$=t=>new Date(t).toLocaleDateString("es-CO",{day:"2-digit",month:"short",year:"numeric"}),ie=t=>["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][t-1]||"",de=t=>({Pendiente:"bg-[rgba(251,191,36,0.15)] text-[#fbbf24]",Aprobado:"bg-[rgba(34,197,94,0.15)] text-[#4ade80]",Liquidado:"bg-[rgba(96,165,250,0.15)] text-[#60a5fa]",Pagado:"bg-[rgba(34,197,94,0.2)] text-[#22c55e]"})[t]||"bg-[rgba(156,163,175,0.15)] text-[#9ca3af]",ce=t=>t>0?"text-[#22c55e]":"text-[#ef4444]",xe=({isOpen:t,onClose:r,idProfesor:l,nombreProfesor:N})=>{const[o,b]=g.useState("todos"),[m,d]=g.useState(""),[f,u]=g.useState(""),{data:x,isLoading:h}=V({idProfesor:l,fechaDesde:m||void 0,fechaHasta:f||void 0,estadoPago:o==="todos"?void 0:o},t);if(!t)return null;const c=x?.reduce((a,y)=>(a[y.estadoPago]=(a[y.estadoPago]||0)+y.totalPago,a.total+=y.totalPago,a),{Pendiente:0,Aprobado:0,Liquidado:0,Pagado:0,total:0}),v=()=>{d(""),u(""),b("todos")};return e.jsxs("div",{className:"absolute inset-0 z-[100] flex items-start justify-center pt-20 px-4 pb-8 overflow-y-auto",children:[e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm -z-10",onClick:r}),e.jsxs("div",{className:"relative z-10 bg-[#1a1a1a] border border-[rgba(255,255,255,0.1)] rounded-2xl shadow-2xl w-full max-w-5xl mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[rgba(255,255,255,0.1)]",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-[#f9fafb] text-2xl font-bold",children:N}),e.jsx("p",{className:"text-[#9ca3af] text-sm mt-1",children:"Detalle de clases y pagos"})]}),e.jsx("button",{onClick:r,className:"text-[#9ca3af] hover:text-[#f9fafb] transition-colors",children:e.jsx(D,{size:24})})]}),c&&e.jsx("div",{className:"p-6 bg-[rgba(26,26,26,0.5)] border-b border-[rgba(255,255,255,0.05)]",children:e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-[rgba(251,191,36,0.1)] border border-[rgba(251,191,36,0.2)] rounded-lg p-4",children:[e.jsx("p",{className:"text-[#9ca3af] text-xs mb-1",children:"Pendiente"}),e.jsx("p",{className:"text-[#fbbf24] text-xl font-bold",children:P(c.Pendiente)})]}),e.jsxs("div",{className:"bg-[rgba(34,197,94,0.1)] border border-[rgba(34,197,94,0.2)] rounded-lg p-4",children:[e.jsx("p",{className:"text-[#9ca3af] text-xs mb-1",children:"Aprobado"}),e.jsx("p",{className:"text-[#4ade80] text-xl font-bold",children:P(c.Aprobado)})]}),e.jsxs("div",{className:"bg-[rgba(96,165,250,0.1)] border border-[rgba(96,165,250,0.2)] rounded-lg p-4",children:[e.jsx("p",{className:"text-[#9ca3af] text-xs mb-1",children:"Liquidado"}),e.jsx("p",{className:"text-[#60a5fa] text-xl font-bold",children:P(c.Liquidado)})]}),e.jsxs("div",{className:"bg-[rgba(34,197,94,0.15)] border border-[rgba(34,197,94,0.3)] rounded-lg p-4",children:[e.jsx("p",{className:"text-[#9ca3af] text-xs mb-1",children:"Pagado"}),e.jsx("p",{className:"text-[#22c55e] text-xl font-bold",children:P(c.Pagado)})]}),e.jsxs("div",{className:"bg-[rgba(255,255,255,0.05)] border border-[rgba(255,255,255,0.1)] rounded-lg p-4",children:[e.jsx("p",{className:"text-[#9ca3af] text-xs mb-1",children:"Total"}),e.jsx("p",{className:"text-[#f9fafb] text-xl font-bold",children:P(c.total)})]})]})}),e.jsxs("div",{className:"p-6 border-b border-[rgba(255,255,255,0.05)]",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"text-[#9ca3af]",size:18}),e.jsx("span",{className:"text-[#9ca3af] text-sm",children:"Filtrar por fecha:"}),e.jsx("input",{type:"date",value:m,onChange:a=>d(a.target.value),className:"bg-[rgba(26,26,26,0.7)] border border-[rgba(255,255,255,0.1)] rounded-lg px-3 py-1.5 text-[#f9fafb] text-sm focus:outline-none focus:border-[#60a5fa]",placeholder:"Desde"}),e.jsx("span",{className:"text-[#9ca3af]",children:"-"}),e.jsx("input",{type:"date",value:f,onChange:a=>u(a.target.value),className:"bg-[rgba(26,26,26,0.7)] border border-[rgba(255,255,255,0.1)] rounded-lg px-3 py-1.5 text-[#f9fafb] text-sm focus:outline-none focus:border-[#60a5fa]",placeholder:"Hasta"}),(m||f||o!=="todos")&&e.jsx("button",{onClick:v,className:"ml-2 text-[#60a5fa] hover:text-[#3b82f6] text-sm transition-colors",children:"Limpiar filtros"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>b("todos"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${o==="todos"?"bg-[#60a5fa] text-white":"bg-[rgba(26,26,26,0.7)] text-[#9ca3af] hover:bg-[rgba(255,255,255,0.05)]"}`,children:"Todos"}),e.jsx("button",{onClick:()=>b("Pendiente"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${o==="Pendiente"?"bg-[#fbbf24] text-white":"bg-[rgba(26,26,26,0.7)] text-[#9ca3af] hover:bg-[rgba(255,255,255,0.05)]"}`,children:"Pendientes"}),e.jsx("button",{onClick:()=>b("Aprobado"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${o==="Aprobado"?"bg-[#4ade80] text-white":"bg-[rgba(26,26,26,0.7)] text-[#9ca3af] hover:bg-[rgba(255,255,255,0.05)]"}`,children:"Aprobadas"}),e.jsx("button",{onClick:()=>b("Liquidado"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${o==="Liquidado"?"bg-[#60a5fa] text-white":"bg-[rgba(26,26,26,0.7)] text-[#9ca3af] hover:bg-[rgba(255,255,255,0.05)]"}`,children:"Liquidadas"}),e.jsx("button",{onClick:()=>b("Pagado"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${o==="Pagado"?"bg-[#22c55e] text-white":"bg-[rgba(26,26,26,0.7)] text-[#9ca3af] hover:bg-[rgba(255,255,255,0.05)]"}`,children:"Pagadas"})]})]}),e.jsx("div",{className:"p-6",children:h?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-2 border-[#60a5fa]/30 border-t-[#60a5fa] rounded-full animate-spin"})}):x&&x.length>0?e.jsx("div",{className:"space-y-3",children:x.map(a=>e.jsx("div",{className:"bg-[rgba(26,26,26,0.7)] border border-[rgba(255,255,255,0.1)] rounded-lg p-4 hover:border-[rgba(255,255,255,0.2)] transition-all",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-[#f9fafb] font-medium",children:a.nombreClase}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${de(a.estadoPago)}`,children:a.estadoPago}),e.jsx("span",{className:"text-[#9ca3af] text-xs",children:a.rolEnClase})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-[#9ca3af]",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(k,{size:14}),$(a.fechaClase)]}),a.fechaAprobacion&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(M,{size:14}),"Aprobado: ",$(a.fechaAprobacion)]}),a.fechaPago&&e.jsxs("span",{className:"flex items-center gap-1 text-[#22c55e]",children:[e.jsx(z,{size:14}),"Pagado: ",$(a.fechaPago)]})]}),a.conceptoAdicional&&e.jsxs("div",{className:"mt-2 flex items-start gap-2",children:[a.valorAdicional>0?e.jsx(J,{size:16,className:"text-[#22c55e] mt-0.5"}):e.jsx(K,{size:16,className:"text-[#ef4444] mt-0.5"}),e.jsx("p",{className:"text-[#9ca3af] text-xs",children:a.conceptoAdicional})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[#f9fafb] text-lg font-bold",children:P(a.totalPago)}),a.valorAdicional!==0&&e.jsxs("p",{className:`text-xs mt-1 ${ce(a.valorAdicional)}`,children:[a.valorAdicional>0?"+":"",P(a.valorAdicional)]})]})]})},a.idClaseProfesor))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Q,{className:"mx-auto text-[#6b7280] mb-3",size:48}),e.jsx("p",{className:"text-[#9ca3af]",children:"No hay clases en este estado"}),e.jsx("p",{className:"text-[#6b7280] text-sm mt-1",children:"Intenta cambiar los filtros"})]})}),e.jsx("div",{className:"p-6 border-t border-[rgba(255,255,255,0.1)] bg-[rgba(26,26,26,0.5)]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-[#9ca3af] text-sm",children:[x?.length||0," clase",x?.length!==1?"s":""," encontrada",x?.length!==1?"s":""]}),e.jsx("button",{onClick:r,className:"px-6 py-2 bg-[rgba(255,255,255,0.1)] hover:bg-[rgba(255,255,255,0.15)] text-[#f9fafb] rounded-lg font-medium transition-all",children:"Cerrar"})]})})]})]})},be=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],me=({isOpen:t,onClose:r,profesores:l,onLiquidar:N,isLoading:o=!1})=>{const b=Z(t),m=new Date,[d,f]=g.useState(m.getMonth()+1),[u,x]=g.useState(m.getFullYear()),[h,c]=g.useState("");if(!t)return null;const v=l.filter(n=>n.clasesAprobadas>0),a=v.reduce((n,C)=>n+C.clasesAprobadas,0),y=v.reduce((n,C)=>n+C.totalAprobado,0),p=n=>{n.preventDefault(),N(d,u,h||void 0)},j=()=>{o||(c(""),r())};return e.jsxs("div",{ref:b,className:"absolute inset-0 z-[100] pt-20 overflow-y-auto",children:[e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md -z-10",onClick:j}),e.jsx("div",{className:"relative flex items-start justify-center p-4 min-h-full",children:e.jsxs("div",{className:"bg-[#1a1a1a] border border-[rgba(255,255,255,0.1)] rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[rgba(255,255,255,0.1)]",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-[#f9fafb] text-xl font-bold",children:"Liquidar Mes"}),e.jsx("p",{className:"text-[#9ca3af] text-sm mt-1",children:"Genera la liquidaciÃ³n mensual oficial"})]}),e.jsx("button",{onClick:j,disabled:o,className:"text-[#9ca3af] hover:text-[#f9fafb] transition-colors disabled:opacity-50",children:e.jsx(D,{size:24})})]}),e.jsxs("form",{onSubmit:p,className:"flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-[rgba(255,255,255,0.05)]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(k,{size:20,className:"text-[#60a5fa]"}),e.jsx("h3",{className:"text-[#f9fafb] font-semibold",children:"PerÃ­odo a Liquidar"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"mes",className:"text-[#f9fafb] text-sm font-medium block mb-2",children:"Mes"}),e.jsx("select",{id:"mes",value:d,onChange:n=>f(Number(n.target.value)),className:"w-full px-4 py-3 bg-[rgba(26,26,26,0.5)] border border-[rgba(255,255,255,0.1)] rounded-lg text-[#f9fafb] focus:border-[#60a5fa] focus:outline-none transition-colors",children:be.map((n,C)=>e.jsx("option",{value:C+1,children:n},C))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"aÃ±o",className:"text-[#f9fafb] text-sm font-medium block mb-2",children:"AÃ±o"}),e.jsx("input",{type:"number",id:"aÃ±o",value:u,onChange:n=>x(Number(n.target.value)),min:2020,max:2030,className:"w-full px-4 py-3 bg-[rgba(26,26,26,0.5)] border border-[rgba(255,255,255,0.1)] rounded-lg text-[#f9fafb] focus:border-[#60a5fa] focus:outline-none transition-colors"})]})]})]}),e.jsxs("div",{className:"p-6 border-b border-[rgba(255,255,255,0.05)]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(z,{size:20,className:"text-[#4ade80]"}),e.jsx("h3",{className:"text-[#f9fafb] font-semibold",children:"Resumen de LiquidaciÃ³n"})]}),v.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-2 mb-4 max-h-60 overflow-y-auto pr-2",children:v.map(n=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-[rgba(26,26,26,0.7)] border border-[rgba(255,255,255,0.05)] rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[#f9fafb] font-medium",children:n.nombreProfesor}),e.jsxs("p",{className:"text-[#9ca3af] text-sm",children:[n.clasesAprobadas," ",n.clasesAprobadas===1?"clase":"clases"]})]}),e.jsx("p",{className:"text-[#4ade80] font-semibold",children:P(n.totalAprobado)})]},n.idProfesor))}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-[rgba(96,165,250,0.1)] border border-[rgba(96,165,250,0.3)] rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[#9ca3af] text-sm",children:"Total Clases"}),e.jsx("p",{className:"text-[#f9fafb] text-xl font-bold",children:a})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[#9ca3af] text-sm",children:"Total a Liquidar"}),e.jsx("p",{className:"text-[#60a5fa] text-xl font-bold",children:P(y)})]})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(se,{className:"mx-auto text-[#fbbf24] mb-3",size:48}),e.jsx("p",{className:"text-[#f9fafb] font-medium",children:"No hay clases aprobadas"}),e.jsx("p",{className:"text-[#9ca3af] text-sm mt-1",children:"Debes aprobar clases antes de generar la liquidaciÃ³n"})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(M,{size:20,className:"text-[#a78bfa]"}),e.jsx("h3",{className:"text-[#f9fafb] font-semibold",children:"Observaciones (Opcional)"})]}),e.jsx("textarea",{id:"observaciones",value:h,onChange:n=>c(n.target.value),placeholder:"Ej: LiquidaciÃ³n de enero 2026. Incluye bonos por desempeÃ±o.",rows:3,className:"w-full px-4 py-3 bg-[rgba(26,26,26,0.5)] border border-[rgba(255,255,255,0.1)] rounded-lg text-[#f9fafb] placeholder:text-[#6b7280] focus:border-[#60a5fa] focus:outline-none transition-colors resize-none"})]}),e.jsxs("div",{className:"flex gap-3 p-6 bg-[rgba(26,26,26,0.5)] border-t border-[rgba(255,255,255,0.05)]",children:[e.jsx("button",{type:"button",onClick:j,disabled:o,className:"flex-1 px-6 py-3 bg-[rgba(64,64,64,0.3)] hover:bg-[rgba(64,64,64,0.5)] text-[#f9fafb] rounded-lg font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:o||v.length===0,className:"flex-1 px-6 py-3 bg-[#60a5fa] hover:bg-[#3b82f6] text-white rounded-lg font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Generando LiquidaciÃ³n...":"Generar LiquidaciÃ³n"})]})]})]})})]})},fe=({isOpen:t,onClose:r,liquidacion:l,onRegistrar:N,isLoading:o=!1})=>{const[b,m]=g.useState(B()),[d,f]=g.useState("");if(g.useEffect(()=>{t&&window.scrollTo({top:0,behavior:"instant"})},[t]),!t||!l)return null;const u=h=>{h.preventDefault(),N(b,d||void 0)},x=()=>{o||(m(B()),f(""),r())};return e.jsxs("div",{className:"absolute inset-0 z-[100] flex items-start justify-center pt-20 px-4 pb-8 overflow-y-auto",children:[e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm -z-10",onClick:x}),e.jsxs("div",{className:"relative z-10 bg-[#1a1a1a] border border-[rgba(255,255,255,0.1)] rounded-2xl shadow-2xl w-full max-w-lg mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[rgba(255,255,255,0.1)]",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-[#f9fafb] text-xl font-bold",children:"ðŸ¦ Registrar Pago"}),e.jsx("p",{className:"text-[#9ca3af] text-sm mt-1",children:"Confirma que el pago fue realizado"})]}),e.jsx("button",{onClick:x,disabled:o,className:"text-[#9ca3af] hover:text-[#f9fafb] transition-colors disabled:opacity-50",children:e.jsx(D,{size:24})})]}),e.jsxs("form",{onSubmit:u,children:[e.jsx("div",{className:"p-6 bg-[rgba(26,26,26,0.5)] border-b border-[rgba(255,255,255,0.05)]",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[#9ca3af] text-xs",children:"Profesor"}),e.jsx("p",{className:"text-[#f9fafb] font-medium",children:l.nombreProfesor})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[#9ca3af] text-xs",children:"Periodo"}),e.jsxs("p",{className:"text-[#f9fafb] text-sm",children:[ie(l.mes)," ",l.aÃ±o]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[#9ca3af] text-xs",children:"Monto a Pagar"}),e.jsx("p",{className:"text-[#4ade80] font-bold",children:P(l.totalPagar)})]})]})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-[#f9fafb] text-sm font-medium flex items-center gap-2 mb-2",children:[e.jsx(k,{size:16,className:"text-[#60a5fa]"}),"Fecha de Pago *"]}),e.jsx("input",{type:"date",value:b,onChange:h=>m(h.target.value),required:!0,disabled:o,className:"w-full px-4 py-2 bg-[rgba(64,64,64,0.2)] border border-[rgba(255,255,255,0.1)] rounded-lg text-[#f9fafb] focus:outline-none focus:border-[#60a5fa] transition-colors disabled:opacity-50"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-[#f9fafb] text-sm font-medium flex items-center gap-2 mb-2",children:[e.jsx(_,{size:16,className:"text-[#9ca3af]"}),"Observaciones (opcional)"]}),e.jsx("textarea",{value:d,onChange:h=>f(h.target.value),placeholder:"Ej: Transferencia bancaria, comprobante #12345",disabled:o,rows:3,className:"w-full px-4 py-2 bg-[rgba(64,64,64,0.2)] border border-[rgba(255,255,255,0.1)] rounded-lg text-[#f9fafb] placeholder-[#6b7280] focus:outline-none focus:border-[#60a5fa] transition-colors resize-none disabled:opacity-50"})]}),e.jsx("div",{className:"bg-[rgba(96,165,250,0.1)] border border-[rgba(96,165,250,0.3)] rounded-lg p-3",children:e.jsxs("p",{className:"text-[#60a5fa] text-xs flex items-center gap-2",children:[e.jsx(z,{size:14}),'Al registrar este pago, el profesor verÃ¡ este monto en su secciÃ³n "Total Pagado"']})})]}),e.jsxs("div",{className:"flex gap-3 p-6 bg-[rgba(26,26,26,0.3)] border-t border-[rgba(255,255,255,0.05)]",children:[e.jsx("button",{type:"button",onClick:x,disabled:o,className:"flex-1 px-4 py-2 bg-[rgba(64,64,64,0.3)] hover:bg-[rgba(64,64,64,0.5)] text-[#f9fafb] rounded-lg font-medium transition-colors disabled:opacity-50",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:o||!b,className:"flex-1 px-4 py-2 bg-[#60a5fa] hover:bg-[#3b82f6] text-white rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Registrando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(z,{size:18}),"Confirmar Pago"]})})]})]})]})]})},ve=()=>{const[t,r]=g.useState(null),[l,N]=g.useState(!1),[o,b]=g.useState(null),[m,d]=g.useState(null),{data:f,isLoading:u}=I({estadoPago:"Pendiente"}),{data:x,isLoading:h}=I({estadoPago:"Aprobado"}),{data:c,isLoading:v}=W(),{data:a,isLoading:y}=X("Cerrada"),p=te(),j=re(),n=le(),C=oe(),w=s=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(s),q=c?.reduce((s,i)=>({totalPendientes:s.totalPendientes+i.clasesPendientes,totalAprobados:s.totalAprobados+i.clasesAprobadas,totalLiquidados:s.totalLiquidados+i.clasesLiquidadas,montoPendiente:s.montoPendiente+i.totalPendiente,montoAprobado:s.montoAprobado+i.totalAprobado,montoLiquidado:s.montoLiquidado+i.totalLiquidado}),{totalPendientes:0,totalAprobados:0,totalLiquidados:0,montoPendiente:0,montoAprobado:0,montoLiquidado:0});return e.jsxs("div",{className:"p-8 max-w-[1600px] mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-[#f9fafb] text-3xl font-bold mb-2",children:"ðŸ’¼ NÃ³mina de Profesores"}),e.jsx("p",{className:"text-[#9ca3af]",children:"Gestiona los pagos a profesores por clases dictadas"})]}),e.jsxs("button",{onClick:()=>N(!0),disabled:!c||c.length===0,className:"flex items-center gap-2 px-6 py-3 bg-[#60a5fa] hover:bg-[#3b82f6] text-white rounded-lg font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(z,{size:20}),"Liquidar Mes"]})]}),q&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-[rgba(64,64,64,0.2)] border border-[rgba(245,158,11,0.3)] rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-[#9ca3af] text-sm",children:"Clases Pendientes"}),e.jsx(Q,{className:"text-[#fbbf24]",size:20})]}),e.jsx("p",{className:"text-[#f9fafb] text-2xl font-bold",children:q.totalPendientes}),e.jsxs("p",{className:"text-[#fbbf24] text-xs mt-1",children:[w(q.montoPendiente)," por aprobar"]})]}),e.jsxs("div",{className:"bg-[rgba(64,64,64,0.2)] border border-[rgba(34,197,94,0.3)] rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-[#9ca3af] text-sm",children:"Clases Aprobadas"}),e.jsx(M,{className:"text-[#4ade80]",size:20})]}),e.jsx("p",{className:"text-[#f9fafb] text-2xl font-bold",children:q.totalAprobados}),e.jsxs("p",{className:"text-[#4ade80] text-xs mt-1",children:[w(q.montoAprobado)," listo para liquidar"]})]}),e.jsxs("div",{className:"bg-[rgba(64,64,64,0.2)] border border-[rgba(59,130,246,0.3)] rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-[#9ca3af] text-sm",children:"Liquidadas"}),e.jsx(z,{className:"text-[#60a5fa]",size:20})]}),e.jsx("p",{className:"text-[#f9fafb] text-2xl font-bold",children:q.totalLiquidados}),e.jsxs("p",{className:"text-[#60a5fa] text-xs mt-1",children:[w(q.montoLiquidado)," en proceso de pago"]})]}),e.jsxs("div",{className:"bg-[rgba(64,64,64,0.2)] border border-[rgba(139,92,246,0.3)] rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-[#9ca3af] text-sm",children:"Total Profesores"}),e.jsx(O,{className:"text-[#a78bfa]",size:20})]}),e.jsx("p",{className:"text-[#f9fafb] text-2xl font-bold",children:c?.length||0}),e.jsx("p",{className:"text-[#a78bfa] text-xs mt-1",children:"Con clases activas"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-[rgba(26,26,26,0.5)] border border-[rgba(245,158,11,0.3)] rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Q,{className:"text-[#fbbf24]",size:20}),e.jsx("h2",{className:"text-[#f9fafb] text-lg font-semibold",children:"Clases Pendientes"}),e.jsx("span",{className:"ml-auto bg-[rgba(245,158,11,0.15)] text-[#fbbf24] px-2 py-1 rounded-full text-sm font-medium",children:f?.reduce((s,i)=>s+i.profesores.length,0)||0})]}),e.jsx("div",{className:"space-y-3 max-h-[calc(100vh-400px)] overflow-y-auto pr-2",children:u?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-2 border-[#fbbf24]/30 border-t-[#fbbf24] rounded-full animate-spin"})}):f&&f.length>0?f.map(s=>e.jsxs("div",{className:"bg-[rgba(26,26,26,0.7)] border border-[rgba(245,158,11,0.2)] rounded-lg p-3",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-[#f9fafb] font-medium",children:s.nombreClase}),e.jsx("p",{className:"text-[#9ca3af] text-sm",children:new Date(s.fechaClase).toLocaleDateString("es-CO",{day:"2-digit",month:"short",year:"numeric"})})]}),e.jsx("span",{className:"text-xs bg-[rgba(245,158,11,0.15)] text-[#fbbf24] px-2 py-1 rounded-full",children:s.tipoClase})]}),s.profesores.map(i=>e.jsx("div",{className:"mt-2 pt-2 border-t border-[rgba(255,255,255,0.05)]",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[#f9fafb] text-sm",children:i.nombreProfesor}),e.jsx("p",{className:"text-[#9ca3af] text-xs",children:i.rolEnClase})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[#f9fafb] font-medium",children:w(i.totalPago)}),e.jsx("button",{onClick:()=>{i.idClaseProfesor&&r({profesor:i,claseNombre:s.nombreClase,claseFecha:new Date(s.fechaClase).toLocaleDateString("es-CO",{day:"2-digit",month:"short",year:"numeric"})})},className:"text-[#fbbf24] text-xs hover:text-[#f59e0b] transition-colors",children:"Aprobar"})]})]})},i.idProfesor))]},s.idClase)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ae,{className:"mx-auto text-[#6b7280] mb-3",size:48}),e.jsx("p",{className:"text-[#9ca3af]",children:"No hay clases pendientes"}),e.jsx("p",{className:"text-[#6b7280] text-sm mt-1",children:"Las clases por aprobar aparecerÃ¡n aquÃ­"})]})})]}),e.jsxs("div",{className:"bg-[rgba(26,26,26,0.5)] border border-[rgba(34,197,94,0.3)] rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(M,{className:"text-[#4ade80]",size:20}),e.jsx("h2",{className:"text-[#f9fafb] text-lg font-semibold",children:"Clases Aprobadas"}),e.jsx("span",{className:"ml-auto bg-[rgba(34,197,94,0.15)] text-[#4ade80] px-2 py-1 rounded-full text-sm font-medium",children:x?.reduce((s,i)=>s+i.profesores.length,0)||0})]}),e.jsx("div",{className:"space-y-3 max-h-[calc(100vh-400px)] overflow-y-auto pr-2",children:h?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-2 border-[#4ade80]/30 border-t-[#4ade80] rounded-full animate-spin"})}):x&&x.length>0?x.map(s=>e.jsxs("div",{className:"bg-[rgba(26,26,26,0.7)] border border-[rgba(34,197,94,0.2)] rounded-lg p-3",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-[#f9fafb] font-medium",children:s.nombreClase}),e.jsx("p",{className:"text-[#9ca3af] text-sm",children:new Date(s.fechaClase).toLocaleDateString("es-CO",{day:"2-digit",month:"short",year:"numeric"})})]}),e.jsx("span",{className:"text-xs bg-[rgba(34,197,94,0.15)] text-[#4ade80] px-2 py-1 rounded-full",children:"Aprobado"})]}),s.profesores.map(i=>e.jsx("div",{className:"mt-2 pt-2 border-t border-[rgba(255,255,255,0.05)]",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[#f9fafb] text-sm",children:i.nombreProfesor}),e.jsx("p",{className:"text-[#9ca3af] text-xs",children:i.rolEnClase})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-[#f9fafb] font-medium",children:w(i.totalPago)})})]})},i.idProfesor))]},s.idClase)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(M,{className:"mx-auto text-[#6b7280] mb-3",size:48}),e.jsx("p",{className:"text-[#9ca3af]",children:"No hay clases aprobadas"}),e.jsx("p",{className:"text-[#6b7280] text-sm mt-1",children:"Las clases aprobadas aparecerÃ¡n aquÃ­"})]})})]}),e.jsxs("div",{className:"bg-[rgba(26,26,26,0.5)] border border-[rgba(64,64,64,0.3)] rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(O,{className:"text-[#9ca3af]",size:20}),e.jsx("h2",{className:"text-[#f9fafb] text-lg font-semibold",children:"Profesores"})]}),e.jsx("div",{className:"space-y-3 max-h-[calc(100vh-400px)] overflow-y-auto pr-2",children:v?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-2 border-[#9ca3af]/30 border-t-[#9ca3af] rounded-full animate-spin"})}):c&&c.length>0?c.map(s=>e.jsxs("div",{className:"bg-[rgba(26,26,26,0.7)] border border-[rgba(255,255,255,0.1)] rounded-lg p-3 hover:border-[rgba(255,255,255,0.2)] transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Y,{userId:s.idProfesor,userType:"profesor",nombre:s.nombreProfesor})}),e.jsxs("span",{className:"text-xs bg-[rgba(139,92,246,0.15)] text-[#a78bfa] px-2 py-1 rounded-full",children:[s.clasesPendientes+s.clasesAprobadas+s.clasesLiquidadas," clases"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[#9ca3af]",children:"Pendiente"}),e.jsx("p",{className:"text-[#fbbf24] font-medium",children:w(s.totalPendiente)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[#9ca3af]",children:"Aprobado"}),e.jsx("p",{className:"text-[#4ade80] font-medium",children:w(s.totalAprobado)})]})]}),e.jsx("button",{onClick:()=>d({idProfesor:s.idProfesor,nombreProfesor:s.nombreProfesor}),className:"w-full mt-2 text-[#60a5fa] text-xs hover:text-[#3b82f6] transition-colors",children:"Ver detalle â†’"})]},s.idProfesor)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(O,{className:"mx-auto text-[#6b7280] mb-3",size:48}),e.jsx("p",{className:"text-[#9ca3af]",children:"No hay profesores"}),e.jsx("p",{className:"text-[#6b7280] text-sm mt-1",children:"Los profesores con clases aparecerÃ¡n aquÃ­"})]})})]})]}),a&&a.length>0&&e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(H,{className:"text-[#60a5fa]",size:24}),e.jsx("h2",{className:"text-[#f9fafb] text-2xl font-bold",children:"Liquidaciones Pendientes de Pago"}),e.jsxs("span",{className:"ml-auto bg-[rgba(96,165,250,0.15)] text-[#60a5fa] px-3 py-1 rounded-full text-sm font-medium",children:[a.length," pendiente",a.length!==1?"s":""]})]}),e.jsx("div",{className:"bg-[rgba(26,26,26,0.5)] border border-[rgba(96,165,250,0.3)] rounded-xl overflow-hidden",children:y?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-2 border-[#60a5fa]/30 border-t-[#60a5fa] rounded-full animate-spin"})}):e.jsx("div",{className:"divide-y divide-[rgba(255,255,255,0.05)]",children:a.map(s=>e.jsx("div",{className:"p-4 hover:bg-[rgba(96,165,250,0.05)] transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"Profesor"}),e.jsx("p",{className:"text-white font-semibold",children:s.nombreProfesor})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"Periodo"}),e.jsxs("p",{className:"text-white font-semibold",children:[new Date(0,s.mes-1).toLocaleString("es-CO",{month:"long"}).charAt(0).toUpperCase()+new Date(0,s.mes-1).toLocaleString("es-CO",{month:"long"}).slice(1)," ",s.aÃ±o]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"Clases"}),e.jsx("p",{className:"text-white font-semibold",children:s.totalClases})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"Horas"}),e.jsxs("p",{className:"text-white font-semibold",children:[s.totalHoras.toFixed(1),"h"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"Monto a Pagar"}),e.jsx("p",{className:"text-[#4ade80] font-bold text-lg",children:w(s.totalPagar)})]})]}),e.jsxs("div",{className:"ml-4 flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>{window.confirm('Â¿EstÃ¡s seguro de eliminar esta liquidaciÃ³n? Las clases volverÃ¡n al estado "Aprobado".')&&C.mutate(s.idLiquidacion)},className:"px-4 py-2 bg-[rgba(239,68,68,0.1)] hover:bg-[rgba(239,68,68,0.2)] text-[#ef4444] border border-[rgba(239,68,68,0.3)] rounded-lg font-semibold transition-all flex items-center gap-2",title:"Eliminar liquidaciÃ³n",children:[e.jsx(ee,{size:18}),"Eliminar"]}),e.jsxs("button",{onClick:()=>b({idLiquidacion:s.idLiquidacion,nombreProfesor:s.nombreProfesor,mes:s.mes,aÃ±o:s.aÃ±o,totalPagar:s.totalPagar}),className:"px-4 py-2 bg-[#60a5fa] hover:bg-[#3b82f6] text-white rounded-lg font-semibold transition-all flex items-center gap-2",children:[e.jsx(H,{size:18}),"Registrar Pago"]})]})]})},s.idLiquidacion))})})]}),e.jsx(ne,{isOpen:t!==null,onClose:()=>r(null),profesor:t?.profesor??null,claseNombre:t?.claseNombre??"",claseFecha:t?.claseFecha??"",onAprobar:(s,i)=>{t?.profesor.idClaseProfesor&&p.mutate({idClaseProfesor:t.profesor.idClaseProfesor,valorAdicional:s,conceptoAdicional:i},{onSuccess:()=>{r(null)}})},isLoading:p.isPending}),e.jsx(me,{isOpen:l,onClose:()=>N(!1),profesores:c??[],onLiquidar:async(s,i,G)=>{const U=(c??[]).filter(L=>L.clasesAprobadas>0).map(L=>j.mutateAsync({idProfesor:L.idProfesor,mes:s,aÃ±o:i,observaciones:G}));try{await Promise.all(U),N(!1)}catch(L){console.error("Error al liquidar:",L)}},isLoading:j.isPending}),e.jsx(fe,{isOpen:o!==null,onClose:()=>b(null),liquidacion:o,onRegistrar:(s,i)=>{o&&n.mutate({idLiquidacion:o.idLiquidacion,fechaPago:s,observaciones:i},{onSuccess:()=>{b(null)}})},isLoading:n.isPending}),e.jsx(xe,{isOpen:m!==null,onClose:()=>d(null),idProfesor:m?.idProfesor??"",nombreProfesor:m?.nombreProfesor??""})]})};export{ve as default};
